<div class="p-4 bg-gray-50 min-h-screen">
  <h1 class="text-2xl font-bold mb-4 text-gray-800">Panel de AdministraciÃ³n</h1>

  <div class="border-b border-gray-200 mb-6 bg-white rounded-t-lg shadow-sm">
    <nav class="-mb-px flex space-x-8 px-4 overflow-x-auto" aria-label="Tabs">
      <button (click)="selectTab('churn')"
        [ngClass]="{'border-indigo-500 text-indigo-600': selectedTab === 'churn', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': selectedTab !== 'churn'}"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all">
        ğŸ¯ PredicciÃ³n de Churn
      </button>
      <button (click)="selectTab('history')"
        [ngClass]="{'border-indigo-500 text-indigo-600': selectedTab === 'history', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': selectedTab !== 'history'}"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all">
        ğŸ“Š Historial de Datos
      </button>
      <button (click)="selectTab('users')"
        [ngClass]="{'border-indigo-500 text-indigo-600': selectedTab === 'users', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': selectedTab !== 'users'}"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all">
        ğŸ‘¥ GestiÃ³n de Usuarios
      </button>
      <button (click)="selectTab('roles')"
        [ngClass]="{'border-indigo-500 text-indigo-600': selectedTab === 'roles', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': selectedTab !== 'roles'}"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all">
        ğŸ” Roles y Permisos
      </button>
      <button (click)="selectTab('planes')"
        [ngClass]="{'border-indigo-500 text-indigo-600': selectedTab === 'planes', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': selectedTab !== 'planes'}"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all">
        ğŸ“± Planes
      </button>
      <button (click)="selectTab('ofertas')"
        [ngClass]="{'border-indigo-500 text-indigo-600': selectedTab === 'ofertas', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': selectedTab !== 'ofertas'}"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all">
        ğŸ Ofertas
      </button>
    </nav>
  </div>

  <div class="mt-4">

    <!-- PestaÃ±a de PredicciÃ³n de Churn -->
    <div *ngIf="selectedTab === 'churn'">
      <app-churn-prediction></app-churn-prediction>
    </div>

    <!-- PestaÃ±a de Historial -->
    <div *ngIf="selectedTab === 'history'">
      <!-- ... existing history content ... -->
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">GestiÃ³n de Historial</h2>
        <div class="flex space-x-2">
          <button (click)="openCreateForm()"
            class="bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-3 rounded shadow">â• Nuevo
            Registro</button>
          <button (click)="toggleDeleted()"
            class="bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-3 rounded shadow">{{ viewingDeleted ? 'ğŸ“‚
            Ver Activos' : 'ğŸ—‘ï¸ Ver Eliminados' }}</button>
          <button (click)="loadHistory()"
            class="bg-indigo-600 hover:bg-indigo-700 text-white text-sm py-2 px-3 rounded shadow">ğŸ”„ Refrescar</button>
        </div>
      </div>
      <app-historial-table [historyList]="historyList" [isDeletedView]="viewingDeleted"
        (onView)="viewHistoryDetail($event)" (onEdit)="openEditForm($event)"
        (onDelete)="deleteHistory($event)"></app-historial-table>
      <app-historial-detail-modal *ngIf="showDetail" [item]="selectedHistory"
        (onClose)="closeDetail()"></app-historial-detail-modal>
      <app-historial-form *ngIf="showForm" [editingItem]="editingHistory" (onSave)="saveHistory($event)"
        (onCancel)="showForm = false"></app-historial-form>
    </div>

    <!-- PestaÃ±a de Usuarios -->
    <div *ngIf="selectedTab === 'users'">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">GestiÃ³n de Usuarios</h2>
        <div class="flex space-x-2">
          <button (click)="openCreateUserForm()"
            class="bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-3 rounded shadow">â• Nuevo Usuario</button>
          <button (click)="toggleDeletedUsers()"
            class="bg-gray-600 hover:bg-gray-700 text-white text-sm py-2 px-3 rounded shadow">{{ viewingDeletedUsers ?
            'ğŸ“‚ Ver Activos' : 'ğŸ—‘ï¸ Ver Eliminados' }}</button>
          <button (click)="loadUsers()"
            class="bg-indigo-600 hover:bg-indigo-700 text-white text-sm py-2 px-3 rounded shadow">ğŸ”„ Refrescar</button>
        </div>
      </div>
      <app-usuario-table [userList]="userList" [isDeletedView]="viewingDeletedUsers" (onView)="viewUserDetail($event)"
        (onEdit)="openEditUserForm($event)" (onDelete)="deleteUser($event)"></app-usuario-table>
      <app-usuario-detail-modal *ngIf="showUserDetail" [user]="selectedUser"
        (onClose)="showUserDetail = false"></app-usuario-detail-modal>
      <app-usuario-form *ngIf="showUserForm" [editingUser]="editingUser" (onSave)="saveUser($event)"
        (onCancel)="showUserForm = false"></app-usuario-form>
    </div>

    <!-- PestaÃ±a de Roles -->
    <div *ngIf="selectedTab === 'roles'">
      <app-roles-list></app-roles-list>
    </div>

    <!-- PestaÃ±a de Planes -->
    <div *ngIf="selectedTab === 'planes'">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-800">GestiÃ³n de Planes</h2>
        <button (click)="openCreatePlanForm()"
          class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow-md transition-all flex items-center gap-2">
          <i class="fas fa-plus"></i> Nuevo Plan
        </button>
      </div>
      <app-plan-table [planList]="planList" (onEdit)="openEditPlanForm($event)"
        (onDelete)="deletePlan($event)"></app-plan-table>
      <app-plan-form *ngIf="showPlanForm" [editingItem]="selectedPlan" (onSave)="savePlan($event)"
        (onCancel)="showPlanForm = false"></app-plan-form>
    </div>

    <!-- PestaÃ±a de Ofertas -->
    <div *ngIf="selectedTab === 'ofertas'">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-800">GestiÃ³n de Ofertas</h2>
        <button (click)="openCreateOfertaForm()"
          class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow-md transition-all flex items-center gap-2">
          <i class="fas fa-plus"></i> Nueva Oferta
        </button>
      </div>
      <app-oferta-table [ofertaList]="ofertaList" (onEdit)="openEditOfertaForm($event)"
        (onDelete)="deleteOferta($event)"></app-oferta-table>
      <app-oferta-form *ngIf="showOfertaForm" [editingItem]="selectedOferta" (onSave)="saveOferta($event)"
        (onCancel)="showOfertaForm = false"></app-oferta-form>
    </div>
  </div>

  <!-- Modal de ConfirmaciÃ³n Global -->
  <app-confirm-modal *ngIf="showConfirmModal" [title]="confirmModalTitle" [message]="confirmModalMessage"
    [confirmText]="confirmModalButtonText" [type]="confirmModalType" (onConfirm)="executePendingAction()"
    (onCancel)="cancelPendingAction()">
  </app-confirm-modal>
</div>